---
weight: 1
---

# Design of version1

> 关于下个大版本的设计稿

## 准备工作

- 提升现有的系统稳定性
- 确保系统日志已接入，可回溯问题原因
- 抽象长链接部分，确保后期可替换可测试
- 完善测试流程和测试用例

## 目标

- 支持用户关系，设计用户信息与用户关系
- 完善消息协议
- 支持消息持久化
- 支持 Prometheus 和 open tracing
- **支持写扩散、读扩散**

## 非目标

- admin 能力可以添加但是不重要

## 执行步骤

1. 先接入 Prometheus 和 open tracing 并提供方法确保每个模块都能使用
2. 设计用户相关表设计
3. 设计消息持久化数据结构
4. 添加用户管理相关能力，增删改查用户关系等
5. 完善消息协议，补充必要信息
6. 支持写扩散，读扩散并进行压测
